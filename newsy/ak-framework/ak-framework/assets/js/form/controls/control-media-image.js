!function(){"use strict";ak.form.controlConstructor.media_image=ak.form.Control.extend({ready:function(){var d=this,o=d.container.find(".ak-media-image-upload-btn"),e=d.container.find(".ak-media-image-remove-btn");o.on("click",function(e){e.preventDefault();var i,e=o.data("media-title"),t=o.data("media-size"),n=o.data("media-data-type"),a=o.data("media-button-text");i||(i=wp.media.frames.file_frame=wp.media({title:e,button:{text:a},multiple:!1,library:{type:"image"}})).on("select",function(){var e=i.state().get("selection").first().toJSON(),a="",a=void 0!==t&&void 0!==e.sizes&&void 0!==e.sizes[t]?ak_sanitize_protocol(e.sizes[t].url):ak_sanitize_protocol(e.url);"id"===n?d.setImage(e.id,a):d.setImage(a,a)}),i.open()}),e.on("click",function(){d.setImage("","")})},setImage:function(e,a){var i=this,t=i.container.find(".ak-media-image-remove-btn"),n=i.container.find(".ak-media-image-preview");e&&""!=e&&null!=e?(t.removeClass("ak-hidden"),n.removeClass("ak-hidden"),n.find("img").attr("src",a),i.setValue(e)):(n.addClass("ak-hidden"),t.addClass("ak-hidden"),i.setValue(""))},setValue:function(e){this.container.find(".ak-form-field-main-input").val(e),this.setting.set(e)}})}(jQuery);