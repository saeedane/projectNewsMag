
/*!
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function(b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{b(jQuery)}}(function(j){var h=/\+/g;function k(a){return a}function g(a){return decodeURIComponent(a.replace(h," "))}function i(b){if(b.indexOf('"')===0){b=b.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{return l.json?JSON.parse(b):b}catch(a){}}var l=j.cookie=function(c,d,A){if(d!==undefined){A=j.extend({},l.defaults,A);if(typeof A.expires==="number"){var b=A.expires,B=A.expires=new Date();B.setDate(B.getDate()+b)}d=l.json?JSON.stringify(d):String(d);return(document.cookie=[l.raw?c:encodeURIComponent(c),"=",l.raw?d:encodeURIComponent(d),A.expires?"; expires="+A.expires.toUTCString():"",A.path?"; path="+A.path:"",A.domain?"; domain="+A.domain:"",A.secure?"; secure":""].join(""))}var y=l.raw?k:g;var a=document.cookie.split("; ");var z=c?undefined:{};for(var e=0,t=a.length;e<t;e++){var f=a[e].split("=");var x=y(f.shift());var w=y(f.join("="));if(c&&c===x){z=i(w);break}if(!c){z[x]=i(w)}}return z};l.defaults={};j.removeCookie=function(a,b){if(j.cookie(a)!==undefined){j.cookie(a,"",j.extend({},b,{expires:-1}));return true}return false}}));!function(H,F,G){var E,J="sortable2",D={drag:true,drop:true,exclude:"",nested:true,vertical:true},x={afterMove:function(a,b){},containerSelector:"ol, ul",distance:0,handle:"",itemSelector:"li",isValidTarget:function(a,b){return true},onCancel:function(b,c,a){},onDrag:function(b,c,a){b.css(c)},onDragStart:function(b,c,a){b.css({height:b.height(),width:b.width()});b.addClass("dragged");H("body").addClass("dragging")},onDrop:function(b,c,a){b.removeClass("dragged").removeAttr("style");H("body").removeClass("dragging")},onMousedown:function(c,a,b){a.preventDefault()},placeholder:'<li class="placeholder"/>',pullPlaceholder:true,serialize:function(a,b,c){var e=H.extend({},a.data());if(c){return b}else{if(b[0]){e.children=b;delete e.subContainer}}delete e.sortable;return e},tolerance:0},u={},A=0;if("ontouchstart" in F){E={start:"touchstart.sortable",end:"touchend.sortable touchcancel.sortable",move:"touchmove.sortable"}}else{E={start:"mousedown.sortable",end:"mouseup.sortable",move:"mousemove.sortable"}}function t(b,c){var e=Math.max(0,b[0]-c[0],c[0]-b[1]),a=Math.max(0,b[2]-c[1],c[1]-b[3]);return e+a}function d(a,b,c){var e=a.slice((c||b)+1||a.length);a.length=b<0?a.length+b:b;return a.push.apply(a,e)}function y(h,b,e){var f=h.length,g=e?"offset":"position";while(f--){var c=h[f].el?h[f].el:H(h[f]),a=c[g]();b[f]=[a.left,a.left+c.outerWidth(true),a.top,a.top+c.outerHeight(true)]}}function I(a,c){var b=c.offset();return{left:a.left-b.left,top:a.top-b.top}}function v(c,a,e){a=[a.left,a.top];e=e&&[e.left,e.top];var b,f=c.length,g=[];while(f--){b=c[f];g[f]=[f,t(b,a),e&&t(b,e)]}g=g.sort(function(h,i){return i[1]-h[1]||i[2]-h[2]||i[0]-h[0]});return g}function w(a,f,h,g){var c=a.find(f),b=c.length;while(b--){var e=c.eq(b).data(J);if(e){e[h](g)}}}function z(a){this.options=H.extend({},x,a);this.containers=[];this.childGroups=[];this.scrolledProxy=H.proxy(this.scrolled,this);this.dragProxy=H.proxy(this.drag,this);this.dropProxy=H.proxy(this.drop,this);if(this.options.parentGroup){this.options.parentGroup.childGroups.push(this)}else{this.placeholder=H(this.options.placeholder);if(!a.isValidTarget){this.options.isValidTarget=G}}}z.get=function(a){if(!u[a.group]){if(!a.group){a.group=A++}u[a.group]=new z(a)}return u[a.group]};z.prototype={dragInit:function(a,b){this.$document=H(b.el[0].ownerDocument);this.toggleListeners("on");this.item=H(a.target).closest(this.options.itemSelector);this.itemContainer=b;this.setPointer(a);this.options.onMousedown(this.item,a,x.onMousedown)},drag:function(a){if(!this.dragging){if(!this.distanceMet(a)){return}w(this.item,this.options.containerSelector,"disable",true);this.options.onDragStart(this.item,this.itemContainer,x.onDragStart);this.item.before(this.placeholder);this.dragging=true}this.setPointer(a);this.options.onDrag(this.item,I(this.pointer,this.item.offsetParent()),x.onDrag);var f=a.pageX,e=a.pageY,b=this.sameResultBox,c=this.options.tolerance;if(!b||b.top-c>e||b.bottom+c<e||b.left-c>f||b.right+c<f){if(!this.searchValidTarget()){this.placeholder.detach()}}},drop:function(a){this.toggleListeners("off");if(this.dragging){if(this.placeholder.closest("html")[0]){this.placeholder.before(this.item).detach()}else{this.options.onCancel(this.item,this.itemContainer,x.onCancel)}this.options.onDrop(this.item,this.getContainer(this.item),x.onDrop);w(this.item,this.options.containerSelector,"enable",true);this.clearDimensions();this.clearOffsetParent();this.lastAppendedItem=this.sameResultBox=G;this.dragging=false}this.item=G},searchValidTarget:function(i,b){if(!i){i=this.relativePointer||this.pointer;b=this.lastRelativePointer||this.lastPointer}var f=v(this.getContainerDimensions(),i,b),c=f.length;while(c--){var e=f[c][0],h=f[c][1];if(!h||this.options.pullPlaceholder){var g=this.containers[e];if(!this.$getOffsetParent()){var a=g.getItemOffsetParent();i=I(i,a);b=I(b,a)}if(g.searchValidTarget(i,b)){return true}}}},movePlaceholder:function(e,c,a,f){var b=this.lastAppendedItem;if(!f&&b&&b[0]===c[0]){return}c[a](this.placeholder);this.lastAppendedItem=c;this.sameResultBox=f;this.options.afterMove(this.placeholder,e)},getContainerDimensions:function(){if(!this.containerDimensions){y(this.containers,this.containerDimensions=[],!this.$getOffsetParent())}return this.containerDimensions},getContainer:function(a){return a.closest(this.options.containerSelector).data(J)},$getOffsetParent:function(){if(this.offsetParent===G){var b=this.containers.length-1,a=this.containers[b].getItemOffsetParent();if(!this.options.parentGroup){while(b--){if(a[0]!=this.containers[b].getItemOffsetParent()[0]){a=false;break}}}this.offsetParent=a}return this.offsetParent},clearOffsetParent:function(){this.offsetParent=G},setPointer:function(b){var a={left:b.pageX,top:b.pageY};if(this.$getOffsetParent()){var c=I(a,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer;this.relativePointer=c}this.lastPointer=this.pointer;this.pointer=a},distanceMet:function(a){return(Math.max(Math.abs(this.pointer.left-a.pageX),Math.abs(this.pointer.top-a.pageY))>=this.options.distance)},addContainer:function(a){this.containers.push(a)},removeContainer:function(b){var a=H.inArray(b,this.containers);a!==-1&&d(this.containers,a)},scrolled:function(a){this.clearDimensions();this.clearOffsetParent()},toggleListeners:function(a){this.$document[a](E.move,this.dragProxy)[a](E.end,this.dropProxy)[a]("scroll.sortable",this.scrolledProxy)},clearDimensions:function(){this.containerDimensions=G;var a=this.containers.length;while(a--){this.containers[a].itemDimensions=G}a=this.childGroups.length;while(a--){this.childGroups[a].clearDimensions()}}};function C(a,b){this.el=a;this.childGroups=[];this.floatRight=false;this.dragInitProxy=H.proxy(this.dragInit,this);this.options=H.extend({},D,b);this.group=z.get(this.options);this.rootGroup=this.options.rootGroup=this.options.rootGroup||this.group;this.parentGroup=this.options.parentGroup=this.options.parentGroup||this.group;this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;this.enable(true)}C.prototype={dragInit:function(a){var b=this.rootGroup;if(!b.item&&a.which===1&&this.options.drag&&!H(a.target).is(this.options.exclude)){b.dragInit(a,this)}},searchValidTarget:function(b,i){var f=v(this.getItemDimensions(),b,i),h=f.length,e=this.rootGroup,c=!e.options.isValidTarget||e.options.isValidTarget(e.item,this);if(!h&&c){e.movePlaceholder(this,this.el,"append");return true}else{while(h--){var g=f[h][0],j=f[h][1];if(!j&&this.options.nested&&this.getContainerGroup(g)){var a=this.getContainerGroup(g).searchValidTarget(b,i);if(a){return true}}else{if(c){this.movePlaceholder(g,b);return true}}}}},movePlaceholder:function(e,m){var n=H(this.items[e]),g=this.itemDimensions[e],f="after",l=n.outerWidth(),a=n.outerHeight(),h=n.offset(),k={left:h.left,right:h.left+l,top:h.top,bottom:h.top+a};if(this.options.vertical){var b=(g[2]+g[3])/2,c=m.top<=b;if(c){f="before";k.bottom-=a/2}else{k.top+=a/2}}else{var j=(g[0]+g[1])/2,i=m.left<=j;if(i!=this.floatRight){f="before";k.right-=l/2}else{k.left+=l/2}}this.rootGroup.movePlaceholder(this,n,f,k)},getItemDimensions:function(){if(!this.itemDimensions){this.items=this.$getChildren(this.el,"item").filter(":not(.dragged)").get();y(this.items,this.itemDimensions=[])}return this.itemDimensions},getItemOffsetParent:function(){var a,b=this.el;if(b.css("position")==="relative"||b.css("position")==="absolute"||b.css("position")==="fixed"){a=b}else{a=b.offsetParent()}return a},getContainerGroup:function(b){var a=H.data(this.items[b],"subContainer");if(a===G){var c=this.$getChildren(this.items[b],"container");a=false;if(c[0]){var e=H.extend({},this.options,{parentGroup:this.group,group:A++});a=c[J](e).data(J).group}H.data(this.items[b],"subContainer",a)}return a},$getChildren:function(a,b){return H(a).children(this.rootGroup.options[b+"Selector"])},_serialize:function(b,c){var a=this,f=c?"item":"container",e=this.$getChildren(b,f).not(this.options.exclude).map(function(){return a._serialize(H(this),!c)}).get();return this.rootGroup.options.serialize(b,e,c)}};var B={enable:function(a){if(this.options.drop){this.group.addContainer(this)}if(!a){w(this.el,this.options.containerSelector,"enable",true)}this.el.on(E.start,this.handle,this.dragInitProxy)},disable:function(a){if(this.options.drop){this.group.removeContainer(this)}if(!a){w(this.el,this.options.containerSelector,"disable",true)}this.el.off(E.start)},serialize:function(){return this._serialize(this.el,true)}};H.extend(C.prototype,B);H.fn[J]=function(b){var a=Array.prototype.slice.call(arguments,1);return this.map(function(){var c=H(this),e=c.data(J);if(e&&B[b]){return B[b].apply(e,a)||this}else{if(!e&&(b===G||typeof b==="object")){c.data(J,new C(c,b))}}return this})}}(jQuery,window);
