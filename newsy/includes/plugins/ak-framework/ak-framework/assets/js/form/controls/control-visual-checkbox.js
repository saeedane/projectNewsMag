!function(l){"use strict";ak.form.controlConstructor.visual_checkbox=ak.form.Control.extend({ready:function(){var e=this,t=e.container.find("ul"),n=e.container.find("input").val(),i=t.hasClass("sorter-enabled");n&&e.setValue(n),t.on("click","li",function(){if(0===l(this).data("value").length)return!1;l(this).toggleClass("checked"),e.update_string_field()}),i&&(t.sortable({placeholder:"placeholder-field",handle:".ak-field-sorter-button",cancel:".disable-item"}),t.on("sortupdate",function(){e.update_string_field()}))},update_string_field:function(){var e=this,t=e.container.find("ul"),n=e.container.find("input"),i="";t.find("li.checked").each(function(){""===i?i=l(this).data("value"):i+=","+l(this).data("value")}),n.val(i),e.setting.set(i)},setValue:function(e){var t,n,i=this.container.find("ul"),a=e.split(",");for(i.find("li").removeClass("checked"),t=a.length;0<=t;t--)i.find('li[data-value="'+a[t]+'"]').length&&(n=i.find('li[data-value="'+a[t]+'"]').addClass("checked"),i.prepend(l(n)));this.update_string_field()}})}(jQuery);