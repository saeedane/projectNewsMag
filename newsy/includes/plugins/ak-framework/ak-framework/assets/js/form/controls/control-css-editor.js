!function(s){"use strict";ak.form.controlConstructor.css_editor=ak.form.controlConstructor.mix_fields.extend({_dinit:{margin:!1,padding:!1,border:!1,background:!1},_dlinked:{margin:!1,padding:!1,border:!1},ready:function(){this.initMixFields(),this.initEditor()},initEditor:function(){var a=this,i=a.container.find(".ak-workspace-wrapper"),e=i.find(".ak-workspace-actions"),n=i.find(".ak-workspace-section-wrapper"),t=(e.find("> .ak-workspace-action-item").removeClass("ak-active"),e.find("> .ak-workspace-action-item:first-child"));t.addClass("ak-active"),n.find(".ak-workspace-section-"+t.data("section")).addClass("ak-active"),a.initEditorActions(t.data("section")),e.off("click",".ak-workspace-action-item").on("click",".ak-workspace-action-item",function(){var i=s(this).data("section");a.container.find(".ak-workspace-section-"+i).size()&&(e.find(".ak-workspace-action-item").removeClass("ak-active"),s(this).addClass("ak-active"),a.initEditorActions(i),n.find(".ak-workspace-section").removeClass("ak-active"),n.find(".ak-workspace-section-"+i).addClass("ak-active"))}),i.find("[data-title]").tooltip({animation:!1})},initEditorActions:function(i){var a=this;if(!this._dinit[i]){switch(i){case"margin":case"padding":a.initLinkedFields(i);break;case"border":a.initBorderFields(),a.initLinkedFields(i);break;case"border-radius":a.initLinkedFields(i);break;case"background":a.initBgTypeFields()}this._dinit[i]=!0}},initLinkedFields:function(a){var e=this,n=e.container.find(".ak-css-editor-"+a);n.on("click",".ak-linked-action-item > li",function(){var i=s(this).data("linked");n.find(".ak-linked-action-item > li").removeClass("ak-active"),s(this).addClass("ak-active"),"border"===a&&i?n.find(".ak-css-border-side-wrapper").hide():n.find(".ak-css-border-side-wrapper").show(),e._dlinked[a]=i}),e.updateLinkedValue(a)},updateLinkedValue:function(n){var t=this,d=t.container.find(".ak-css-editor-"+n);d.find(".ak-form-control[data-linked]").each(function(){var i=s(this).data("control-id"),e=s(this).data("linked");ak.form.Controls[i].onChange(function(a){t._dlinked[n]&&(t._dlinked[n]=!1,"undefined"!=e&&d.find('[data-linked="'+e+'"]').each(function(){var i=s(this).data("control-id");ak.form.Controls[i]&&ak.form.Controls[i].setValue(a)}),t._dlinked[n]=!0)})})},initBorderFields:function(){var a=this.container.find(".ak-css-editor-border");function i(i){a.find(".ak-css-border-side-select > li").removeClass("ak-active"),a.find(".ak-css-border-side-select > li.ak-css-border-side-"+i).addClass("ak-active"),a.find(".ak-css-editor-border-side").hide(),a.find(".ak-css-editor-border-"+i).show()}i(a.find(".ak-css-border-side-select>li:first-child").data("border")),a.on("click",".ak-css-border-side-select > li",function(){i(s(this).data("border"))})},initBgTypeFields:function(){}})}(jQuery);